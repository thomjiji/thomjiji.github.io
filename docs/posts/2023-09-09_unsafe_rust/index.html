<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Unsafe Rust | thomjiji</title>
<meta name="keywords" content="">
<meta name="description" content="You can take five actions in unsafe Rust that you can&rsquo;t in safe Rust, which we call unsafe superpowers.
Dereference a raw pointer Call an unsafe function or method Access or modify a mutable static variable Implement an unsafe trait Access fields of unions. unsafe doesn&rsquo;t turn off the borrow checker or disable any other of Rust&rsquo;s safety checks: if you use a reference in unsafe code, it will still be checked.">
<meta name="author" content="">
<link rel="canonical" href="https://thomjiji.github.io/posts/2023-09-09_unsafe_rust/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.b04d7c9c62d920af2be03c812f2b5be690c0278b96abe695c3590e5e250a2ed9.css" integrity="sha256-sE18nGLZIK8r4DyBLytb5pDAJ4uWq&#43;aVw1kOXiUKLtk=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js" integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG&#43;9vmJ0cTS&#43;ovo0FeA="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://thomjiji.github.io/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://thomjiji.github.io/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://thomjiji.github.io/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://thomjiji.github.io/apple-touch-icon.png">
<link rel="mask-icon" href="https://thomjiji.github.io/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="icon" href="https://thomjiji.github.io/powerpuff_girls_buttercup.jpg" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;1,100;1,200;1,300;1,400;1,500;1,600;1,700&family=JetBrains+Mono:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800&family=Space+Grotesk:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    
  </body>
</html>
<meta property="og:title" content="Unsafe Rust" />
<meta property="og:description" content="You can take five actions in unsafe Rust that you can&rsquo;t in safe Rust, which we call unsafe superpowers.
Dereference a raw pointer Call an unsafe function or method Access or modify a mutable static variable Implement an unsafe trait Access fields of unions. unsafe doesn&rsquo;t turn off the borrow checker or disable any other of Rust&rsquo;s safety checks: if you use a reference in unsafe code, it will still be checked." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://thomjiji.github.io/posts/2023-09-09_unsafe_rust/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2023-09-09T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-09-09T00:00:00+00:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Unsafe Rust"/>
<meta name="twitter:description" content="You can take five actions in unsafe Rust that you can&rsquo;t in safe Rust, which we call unsafe superpowers.
Dereference a raw pointer Call an unsafe function or method Access or modify a mutable static variable Implement an unsafe trait Access fields of unions. unsafe doesn&rsquo;t turn off the borrow checker or disable any other of Rust&rsquo;s safety checks: if you use a reference in unsafe code, it will still be checked."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://thomjiji.github.io/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Unsafe Rust",
      "item": "https://thomjiji.github.io/posts/2023-09-09_unsafe_rust/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Unsafe Rust",
  "name": "Unsafe Rust",
  "description": "You can take five actions in unsafe Rust that you can\u0026rsquo;t in safe Rust, which we call unsafe superpowers.\nDereference a raw pointer Call an unsafe function or method Access or modify a mutable static variable Implement an unsafe trait Access fields of unions. unsafe doesn\u0026rsquo;t turn off the borrow checker or disable any other of Rust\u0026rsquo;s safety checks: if you use a reference in unsafe code, it will still be checked.",
  "keywords": [
    
  ],
  "articleBody": "You can take five actions in unsafe Rust that you can’t in safe Rust, which we call unsafe superpowers.\nDereference a raw pointer Call an unsafe function or method Access or modify a mutable static variable Implement an unsafe trait Access fields of unions. unsafe doesn’t turn off the borrow checker or disable any other of Rust’s safety checks: if you use a reference in unsafe code, it will still be checked. The unsafe keyword only gives you access to these five features that are then not checked by the compiler for memory safety.\nIn addition, unsafe does not mean the code inside the block is necessarily dangerous or that it will definitely have memory safety problems.\nDereferencing a Raw Pointer Similar to references. Raw pointers can be immutable or mutable, written as *const T and *mut T. The asterisk isn’t the dereference operator; it’s part of the type name.\nUnlike references and smart pointer, raw pointers:\nAre allowed to ignore the borrowing rules by having both immutable and mutable pointers or multiple mutable pointers to the same location Aren’t guaranteed to point to valid memory Are allowed to be null Don’t implement any automatic cleanup We can create raw pointers in safe code, but we need to dereference a raw pointer to access the data in unsafe block:\n1 2 3 4 5 6 7 8 9 let mut num = 5; let r1 = \u0026num as *const i32; let r2 = \u0026mut num as *mut i32; unsafe { println!(\"r1 is: {}\", *r1); println!(\"r2 is: {}\", *r2); } Creating a pointer does no harm; it’s only when we try to access the value that it points at that we might end up dealing with an invalid value.\nWith raw pointers, we can create a mutable pointer and an immutable pointer to the same location and change data through the mutable pointer, potentially creating a data race.\nAccessing or Modifying a Mutable Static Variable Global variables, in Rust, it’s static variables.\n1 2 3 4 5 static HELLO_WORLD: \u0026str = \"HELLO WORLD\"; fn main() { println!(\"Name is {}\", HELLO_WORLD); } Static variables can only store references with the 'static lifetime, which means the Rust compiler can figure out the lifetime and we aren’t required to annotate it explicitly.\nAccess immutable static variable is safe. Accessing and modifying mutable static variables is unsafe.\nDifferences between immutable static variables and constants:\nStatic variable have a fixed address in memory. Using the value will always access the same data. Constants, are allowed to duplicate their data whenever they’re used. Static variables can be mutable. Accessing and modifying mutable static variables is unsafe. Any code that reads or writes from static variables must be within an unsafe block.\nA union is similar to a struct, but only one declared field is used in a particular instance at one time. It’s primarily used to interface with unions in C code.\n",
  "wordCount" : "485",
  "inLanguage": "en",
  "datePublished": "2023-09-09T00:00:00Z",
  "dateModified": "2023-09-09T00:00:00Z",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://thomjiji.github.io/posts/2023-09-09_unsafe_rust/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "thomjiji",
    "logo": {
      "@type": "ImageObject",
      "url": "https://thomjiji.github.io/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://thomjiji.github.io/" accesskey="h" title="thomjiji (Alt + H)">thomjiji</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://thomjiji.github.io/about/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://thomjiji.github.io/archives/" title="Archives">
                    <span>Archives</span>
                </a>
            </li>
            <li>
                <a href="https://thomjiji.github.io/search/" title="Search (Alt &#43; /)" accesskey=/>
                    <span>Search</span>
                </a>
            </li>
            <li>
                <a href="https://thomjiji.github.io/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://thomjiji.github.io/">Home</a>&nbsp;»&nbsp;<a href="https://thomjiji.github.io/posts/">Posts</a></div>
    <h1 class="post-title">
      Unsafe Rust
    </h1>
    <div class="post-meta"><span title='2023-09-09 00:00:00 +0000 UTC'>2023-09-09</span>&nbsp;|&nbsp;<a href="https://github.com/thomjiji/thomjiji.github.io/tree/main/content//posts/2023-09-09_unsafe_rust.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> 
  <div class="post-content"><p>You can take five actions in unsafe Rust that you can&rsquo;t in safe Rust, which we call
<em>unsafe superpowers</em>.</p>
<ul>
<li>Dereference a raw pointer</li>
<li>Call an unsafe function or method</li>
<li>Access or modify a mutable static variable</li>
<li>Implement an unsafe trait</li>
<li>Access fields of <code>union</code>s.</li>
</ul>
<p><code>unsafe</code> doesn&rsquo;t turn off the borrow checker or disable any other of Rust&rsquo;s safety
checks: if you use a reference in unsafe code, it will still be checked. The <code>unsafe</code>
keyword only gives you access to these five features that are then not checked by the
compiler for memory safety.</p>
<p>In addition, <code>unsafe</code> does not mean the code inside the block is necessarily dangerous
or that it will definitely have memory safety problems.</p>
<h3 id="dereferencing-a-raw-pointer">Dereferencing a Raw Pointer<a hidden class="anchor" aria-hidden="true" href="#dereferencing-a-raw-pointer">#</a></h3>
<p>Similar to references. Raw pointers can be immutable or mutable, written as <code>*const T</code>
and <code>*mut T</code>. The asterisk isn&rsquo;t the dereference operator; it&rsquo;s part of the type name.</p>
<p>Unlike references and smart pointer, raw pointers:</p>
<ul>
<li>Are allowed to ignore the borrowing rules by having both immutable and mutable
pointers or multiple mutable pointers to the same location</li>
<li>Aren’t guaranteed to point to valid memory</li>
<li>Are allowed to be null</li>
<li>Don’t implement any automatic cleanup</li>
</ul>
<p>We can create raw pointers in safe code, but we need to dereference a raw pointer to
access the data in unsafe block:</p>
<div class="highlight"><div style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#58626f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#58626f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#58626f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#58626f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#58626f">5
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#58626f">6
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#58626f">7
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#58626f">8
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#58626f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#c678dd">let</span> <span style="color:#c678dd">mut</span> <span style="color:#c1abea">num</span> <span style="color:#c7bf54">=</span> <span style="color:#d19a66">5</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">let</span> <span style="color:#c1abea">r1</span> <span style="color:#c7bf54">=</span> <span style="color:#c7bf54">&amp;</span><span style="color:#c1abea">num</span> <span style="color:#c678dd">as</span> <span style="color:#c7bf54">*</span><span style="color:#c678dd">const</span> <span style="color:#ef8383">i32</span>;
</span></span><span style="display:flex;"><span><span style="color:#c678dd">let</span> <span style="color:#c1abea">r2</span> <span style="color:#c7bf54">=</span> <span style="color:#c7bf54">&amp;</span><span style="color:#c678dd">mut</span> <span style="color:#c1abea">num</span> <span style="color:#c678dd">as</span> <span style="color:#c7bf54">*</span><span style="color:#c678dd">mut</span> <span style="color:#ef8383">i32</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">unsafe</span> {
</span></span><span style="display:flex;"><span>    <span style="color:#c1abea">println!</span>(<span style="color:#98c379">&#34;r1 is: {}&#34;</span>, <span style="color:#c7bf54">*</span><span style="color:#c1abea">r1</span>);
</span></span><span style="display:flex;"><span>    <span style="color:#c1abea">println!</span>(<span style="color:#98c379">&#34;r2 is: {}&#34;</span>, <span style="color:#c7bf54">*</span><span style="color:#c1abea">r2</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>Creating a pointer does no harm; it’s only when we try to access the value that it
points at that we might end up dealing with an invalid value.</p>
<p>With raw pointers, we can create a mutable pointer and an immutable pointer to the same
location and <strong>change data through the mutable pointer</strong>, potentially creating a data
race.</p>
<h3 id="accessing-or-modifying-a-mutable-static-variable">Accessing or Modifying a Mutable Static Variable<a hidden class="anchor" aria-hidden="true" href="#accessing-or-modifying-a-mutable-static-variable">#</a></h3>
<p><em>Global variables</em>, in Rust, it&rsquo;s <em>static variables</em>.</p>
<div class="highlight"><div style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
<table style="border-spacing:0;padding:0;margin:0;border:0;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#58626f">1
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#58626f">2
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#58626f">3
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#58626f">4
</span><span style="white-space:pre;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#58626f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#b0c4de;background-color:#282c34;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-rust" data-lang="rust"><span style="display:flex;"><span><span style="color:#c678dd">static</span> <span style="color:#c1abea">HELLO_WORLD</span>: <span style="color:#c678dd">&amp;</span><span style="color:#ef8383">str</span> <span style="color:#c7bf54">=</span> <span style="color:#98c379">&#34;HELLO WORLD&#34;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#c678dd">fn</span> <span style="color:#00b1f7">main</span>() {
</span></span><span style="display:flex;"><span>    <span style="color:#c1abea">println!</span>(<span style="color:#98c379">&#34;Name is {}&#34;</span>, <span style="color:#c1abea">HELLO_WORLD</span>);
</span></span><span style="display:flex;"><span>}
</span></span></code></pre></td></tr></table>
</div>
</div><p>Static variables can only store references with the <code>'static</code> lifetime, which means the
Rust compiler can figure out the lifetime and we aren&rsquo;t required to annotate it
explicitly.</p>
<p>Access immutable static variable is <em>safe</em>. Accessing and modifying mutable static
variables is <em>unsafe</em>.</p>
<p>Differences between immutable <em>static variables</em> and <em>constants</em>:</p>
<ul>
<li>Static variable have a fixed address in memory. Using the value will always access the
same data.</li>
<li>Constants, are allowed to duplicate their data whenever they&rsquo;re used.</li>
<li><strong>Static variables can be mutable</strong>. Accessing and modifying mutable static variables
is <em>unsafe</em>.</li>
</ul>
<p>Any code that reads or writes from static variables must be within an <code>unsafe</code> block.</p>
<p>A <code>union</code> is similar to a <code>struct</code>, but only one declared field is used in a particular
instance at one time. It&rsquo;s primarily used to interface with unions in C code.</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
<nav class="paginav">
  <a class="prev" href="https://thomjiji.github.io/posts/2023-09-18_parse_quicktime/">
    <span class="title">« Prev</span>
    <br>
    <span>Parse QuickTime</span>
  </a>
  <a class="next" href="https://thomjiji.github.io/posts/2023-09-07_machine_learning_glossary/">
    <span class="title">Next »</span>
    <br>
    <span>Machine Learning Glossary</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Unsafe Rust on twitter"
        href="https://twitter.com/intent/tweet/?text=Unsafe%20Rust&amp;url=https%3a%2f%2fthomjiji.github.io%2fposts%2f2023-09-09_unsafe_rust%2f&amp;hashtags=">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Unsafe Rust on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fthomjiji.github.io%2fposts%2f2023-09-09_unsafe_rust%2f&title=Unsafe%20Rust">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Unsafe Rust on telegram"
        href="https://telegram.me/share/url?text=Unsafe%20Rust&amp;url=https%3a%2f%2fthomjiji.github.io%2fposts%2f2023-09-09_unsafe_rust%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://thomjiji.github.io/">thomjiji</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
